{"ast":null,"code":"import React,{useState}from\"react\";import\"./ToastModal.css\";import{postFoodData}from\"../../apis/getFoodAPI\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ToastModal=_ref=>{let{isOpen,onClose,user_id,fetchData}=_ref;const[foodName,setFoodName]=useState(\"\");const[quantity,setQuantity]=useState(\"\");const[manufacturingDate,setManufacturingDate]=useState(\"\");const[expiryDate,setExpiryDate]=useState(\"\");const[category,setCategory]=useState(\"\");const[photoURL,setPhotoURL]=useState(\"\");const handlePhotoUpload=e=>{const file=e.target.files[0];const reader=new FileReader();reader.onload=()=>{setPhotoURL(reader.result);};reader.readAsDataURL(file);};const resetForm=()=>{setFoodName(\"\");setQuantity(\"\");setManufacturingDate(\"\");setExpiryDate(\"\");setCategory(\"\");setPhotoURL(\"\");};const handleCancel=()=>{resetForm();onClose();};const handleSubmit=e=>{const newItem={food_name:foodName,food_pic:photoURL,category:category,food_amount:parseInt(quantity,10),// quantity 정수로 변환\npurchase_date:new Date(manufacturingDate).toISOString(),expiration_date:new Date(expiryDate).toISOString(),user_id:user_id};postFoodData(user_id,newItem).then(()=>{fetchData();resetForm();onClose();});};return isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"toast-modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"toast-modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"registration-title\",children:\"\\uC2DD\\uD488 \\uB4F1\\uB85D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"left_section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-photo\",children:[photoURL&&/*#__PURE__*/_jsx(\"img\",{src:photoURL,alt:\"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/jpeg,image/png\",className:\"file-input\",onChange:handlePhotoUpload,style:{display:\"none\"}}),/*#__PURE__*/_jsx(\"button\",{className:\"change-photobtn\",onClick:()=>document.querySelector(\".file-input\").click(),children:\"\\uC0AC\\uC9C4 \\uC120\\uD0DD\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"right_section\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC74C\\uC2DD \\uC774\\uB984:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:foodName,onChange:e=>setFoodName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC218\\uB7C9:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:quantity,onChange:e=>setQuantity(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC81C\\uC870\\uC77C\\uC790:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:manufacturingDate,onChange:e=>setManufacturingDate(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC720\\uD1B5\\uAE30\\uD55C:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:expiryDate,onChange:e=>setExpiryDate(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uCE74\\uD14C\\uACE0\\uB9AC:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:category,onChange:e=>setCategory(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel-button\",type:\"button\",onClick:()=>handleCancel(),children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",type:\"submit\",onClick:()=>handleSubmit(),children:\"\\uC644\\uB8CC\"})]})]})})]})});};export default ToastModal;","map":{"version":3,"names":["React","useState","postFoodData","jsx","_jsx","jsxs","_jsxs","ToastModal","_ref","isOpen","onClose","user_id","fetchData","foodName","setFoodName","quantity","setQuantity","manufacturingDate","setManufacturingDate","expiryDate","setExpiryDate","category","setCategory","photoURL","setPhotoURL","handlePhotoUpload","e","file","target","files","reader","FileReader","onload","result","readAsDataURL","resetForm","handleCancel","handleSubmit","newItem","food_name","food_pic","food_amount","parseInt","purchase_date","Date","toISOString","expiration_date","then","className","children","onClick","stopPropagation","src","alt","type","accept","onChange","style","display","document","querySelector","click","onSubmit","value","required"],"sources":["/Users/dusehd1/KMU/3-1/gjb_ft/front/src/components/ToastModal/ToastModal.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./ToastModal.css\";\nimport { postFoodData } from \"../../apis/getFoodAPI\";\n\nconst ToastModal = ({ isOpen, onClose, user_id, fetchData }) => {\n  const [foodName, setFoodName] = useState(\"\");\n  const [quantity, setQuantity] = useState(\"\");\n  const [manufacturingDate, setManufacturingDate] = useState(\"\");\n  const [expiryDate, setExpiryDate] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [photoURL, setPhotoURL] = useState(\"\");\n\n  const handlePhotoUpload = (e) => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.onload = () => {\n      setPhotoURL(reader.result);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const resetForm = () => {\n    setFoodName(\"\");\n    setQuantity(\"\");\n    setManufacturingDate(\"\");\n    setExpiryDate(\"\");\n    setCategory(\"\");\n    setPhotoURL(\"\");\n  };\n\n  const handleCancel = () => {\n    resetForm();\n    onClose();\n  };\n\n  const handleSubmit = (e) => {\n    const newItem = {\n      food_name: foodName,\n      food_pic: photoURL,\n      category: category,\n      food_amount: parseInt(quantity, 10), // quantity 정수로 변환\n      purchase_date: new Date(manufacturingDate).toISOString(),\n      expiration_date: new Date(expiryDate).toISOString(),\n      user_id: user_id,\n    };\n\n    postFoodData(user_id, newItem).then(() => {\n      fetchData();\n      resetForm();\n      onClose();\n    });\n  };\n\n  return (\n    isOpen && (\n      <div className=\"toast-modal-overlay\">\n        <div\n          className=\"toast-modal-content\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          <h2 className=\"registration-title\">식품 등록</h2>\n\n          <div className=\"left_section\">\n            <div className=\"user-photo\">\n              {photoURL && <img src={photoURL} alt=\"프로필 사진\" />}\n              <input\n                type=\"file\"\n                accept=\"image/jpeg,image/png\"\n                className=\"file-input\"\n                onChange={handlePhotoUpload}\n                style={{ display: \"none\" }}\n              />\n              <button\n                className=\"change-photobtn\"\n                onClick={() => document.querySelector(\".file-input\").click()}\n              >\n                사진 선택\n              </button>\n            </div>\n          </div>\n          <div className=\"right_section\">\n            <form onSubmit={handleSubmit}>\n              <div className=\"form-group\">\n                <label>음식 이름:</label>\n                <input\n                  type=\"text\"\n                  value={foodName}\n                  onChange={(e) => setFoodName(e.target.value)}\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>수량:</label>\n                <input\n                  type=\"number\"\n                  value={quantity}\n                  onChange={(e) => setQuantity(e.target.value)}\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>제조일자:</label>\n                <input\n                  type=\"date\"\n                  value={manufacturingDate}\n                  onChange={(e) => setManufacturingDate(e.target.value)}\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>유통기한:</label>\n                <input\n                  type=\"date\"\n                  value={expiryDate}\n                  onChange={(e) => setExpiryDate(e.target.value)}\n                  required\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>카테고리:</label>\n                <input\n                  type=\"text\"\n                  value={category}\n                  onChange={(e) => setCategory(e.target.value)}\n                  required\n                />\n              </div>\n              <div className=\"button-group\">\n                <button\n                  className=\"cancel-button\"\n                  type=\"button\"\n                  onClick={() => handleCancel()}\n                >\n                  취소\n                </button>\n                <button\n                  className=\"submit-button\"\n                  type=\"submit\"\n                  onClick={() => handleSubmit()}\n                >\n                  완료\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    )\n  );\n};\n\nexport default ToastModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}